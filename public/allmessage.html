<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/src/output.css">
</head>

<body>
    <header class="text-gray-600 body-font border-b-2 border-b-slate-300 shadow-xl sticky top-0 backdrop-blur-3xl z-10">
        <div
            class="container w-screen md:w-[90%] md:pt-5 mx-auto flex flex-wrap py-5 px-2 md:p-5 justify-between items-center">
            <a href="/" class="flex title-font font-medium items-center text-gray-900 md:mb-0">
                <img width="50" height="50" src="https://img.icons8.com/3d-fluency/94/chat-message.png"
                    alt="chat-message" />
                <span class="ml-3 text-lg font-bold">All Messages</span>
                <span id="messageNumber" class="ml-3 text-lg"></span>
                <a href="/"
                    class="text-gray-900 bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 hover:bg-gradient-to-br  shadow-lg shadow-lime-500/50  font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2 mt-2">Go
                    Back</a>
            </a>
        </div>
    </header>


    <div id="mainDiv" class="p-4 lg:w-11/12 flex justify-center m-auto space-x-5 flex-wrap z-0 min-h-[75vh]">

    </div>

    <footer class="text-gray-600 body-font  backdrop-blur-3xl md:w-[90%] md:m-auto">
        <div class="container px-5 py-8 mx-auto flex items-center sm:flex-row flex-col">
            <a href="/" class="flex title-font font-medium items-center md:justify-start justify-center text-gray-900">
                <img width="50" height="50" src="https://img.icons8.com/3d-fluency/94/chat-message.png"
                    alt="chat-message" />
                <span class="ml-3 text-xl font-bold">Incognito Inbox</span>
            </a>
            <p class="text-sm text-gray-500 sm:ml-4 sm:pl-4 sm:border-l-2 sm:border-gray-200 sm:py-2 sm:mt-0 mt-4">©
                2024
                Soumajyoti —
                <a href="https://twitter.com/knyttneve" class="text-gray-600 ml-1" rel="noopener noreferrer"
                    target="_blank">All Rights Reserved</a>
            </p>
            <span class="inline-flex sm:ml-auto sm:mt-0 mt-4 justify-center sm:justify-start">
                <a target="_blank" class="text-gray-500" href="https://www.facebook.com/soumajy">
                    <svg fill="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        class="w-5 h-5" viewBox="0 0 24 24">
                        <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path>
                    </svg>
                </a>
                <a target="_blank" class="ml-3 text-gray-500"
                    href="https://www.linkedin.com/in/soumajyoti-sarkar-6a88a2166">
                    <svg fill="currentColor" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="0" class="w-5 h-5" viewBox="0 0 24 24">
                        <path stroke="none"
                            d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z">
                        </path>
                        <circle cx="4" cy="4" r="2" stroke="none"></circle>
                    </svg>
                </a>
            </span>
        </div>
    </footer>

    <script>
        window.addEventListener('DOMContentLoaded', async () => {
            const res = await fetch('/message')
            if (res.ok) {
                const data = await res.json()
                data.forEach((message) => {
                    const div = document.createElement('div')
                    div.classList.add("h-fit", "bg-gray-100", "mb-5", "px-8", "pt-8", "pb-12", "rounded-lg", "overflow-hidden", "text-center", "relative");

                    const h1 = document.createElement('h1')
                    h1.classList.add("title-font", "sm:text-2xl", "text-xl", "font-medium", "text-gray-900", "mb-3");

                    const p = document.createElement('p')
                    p.classList.add("leading-relaxed", "mb-3")

                    const dateString = message.createdAt;
                    const formattedDateTime = new Date(dateString).toLocaleString('en-US');
                    console.log(formattedDateTime)

                    h1.textContent = formattedDateTime
                    p.textContent = message.mess

                    div.appendChild(h1)
                    div.appendChild(p)

                    containerDiv = document.getElementById("mainDiv")
                    containerDiv.appendChild(div)
                })

                const nos = data.length
                document.getElementById("messageNumber").textContent = `(${nos})`
            }
        })
    </script>
</body>

</html>